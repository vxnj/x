<!DOCTYPE html>
<meta charset="UTF-8">
<html>
<head>
<title>ThisIsThePageTitle</title>
</head>

<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">

<script src="js/funcs.js"></script>
<script src="js/fDate.js"></script>
<link rel="stylesheet" href="style.css" />
<link rel="icon" type="image/x-icon" href="images/hal.svg">

<script>

var dataM;
var dataG;
var dataz;
let wrd;


function getM() {
  key = "?key=c75da45d-5bc4-4b3b-a8cc-a5f99319e10a";
  let response = fetch("https://www.dictionaryapi.com/api/v3/references/collegiate/json/" + wrd + key, {"method": "GET"})
  .then(response => response.json())
  .then(data => {
    dataM = data;

    document.getElementById("app1").innerHTML = 'MW: ' 
      + '<a href="https://www.merriam-webster.com/dictionary/' +  wrd 
      + ' "style="text-decoration: none;" target="_blank">' + dataM[0].meta.id  + " (" + dataM[0].fl + ")"  +'</a>';

    document.getElementById("app2").innerHTML = dataM[0].shortdef[0]
    // + "<br>"+ dataM[0].date + " - " + dataM[0].et[0][1];

    })
}

function getG() {
  let response = fetch("https://api.dictionaryapi.dev/api/v2/entries/en/" + wrd , {"method": "GET"})
  .then(response => response.json())
  .then(data => {
    dataG = data;

    document.getElementById("app3").innerHTML = 'G: ' 
      + '<a href="https://www.google.com/search?hl=en&amp;q=define+' +  wrd 
      + ' "style="text-decoration: none;" target="_blank">' + dataG[0].word   + " (" + dataG[0].meanings[0].partOfSpeech + ")"  + '</a>';
    document.getElementById("app4").innerHTML = dataG[0].meanings[0].definitions[0].definition
    })
}

function getQ() {
  // ninjas
  let response = fetch("https://dictionary-by-api-ninjas.p.rapidapi.com/v1/dictionary?word=" + wrd , {
    "method": "GET",
    "headers": {
      "x-rapidapi-host": "dictionary-by-api-ninjas.p.rapidapi.com",
      "x-rapidapi-key": "b82347799fmsha23f8c4bf57860ap16128djsn29dc226ace18"
      }
    })

  .then(response => response.json())
  .then(data => {
    datax = data;
    document.getElementById("app5").innerHTML = 'ninja api: ' + datax.word;
    document.getElementById("app6").innerHTML = datax.definition;
    })
}

async function getT(lang) {
    const res = await fetch("https://translate.argosopentech.com/translate", {
    method: "POST",
    body: JSON.stringify({
      q: wrd,
      source: "en",
      target: lang
    }),
    headers: { "Content-Type": "application/json" }
    });

    console.log(lang , await res.json());
  }



let data;
const api_url ="https://zenquotes.io/api/random?jj";

async function getJ(url)
{
  prx = "https://api.allorigins.win/raw?url=";
  now = date_format(new Date(), 'g:i:sa');
  console.log(now);

  // const response = await fetch(prx + url);
  const response = await fetch(prx + url + '?' + now);
  
  data = await response.json();

  console.log(data);
  quote  = '"' + (data[0].q) + '"';
  author = data[0].a;
  search = 'https://en.wikipedia.org/wiki/?search=' + author.replace(" ", "%20");
  console.log(quote + '\n\n—' + author + '\n\n' + search);
  // copyToClipboard(quote + '\n\n—' + author + '\n\n' + search);

}



function doFill() {
  wrd = document.getElementById('word').value;;  
  dataM = getM();
  dataG = getG();

  getT('de');
  getT('es');
  getT('fr');

}



</script>


<body>
  <p ></p>
  <input type="text" id="word" name="word" placeholder="enter word"><br>
  <button id="get" onclick="doFill()">GET</button><br><br>

  <div id="app1">1</div><br>
  <div id="app2">2</div><br><br>
  <div id="app3">3</div><br>
  <div id="app4">4</div><br><br>
  <!-- <div id="app5">5</div><br>
  <div id="app6"><blockquote>&ldquo;Repetition does not transform a lie into a truth.&rdquo; &mdash; <footer>Franklin D. Roosevelt</footer></div><br><br><br> -->
  <button id="getj" onclick="getJ(api_url)">Joke</button><br><br>


<script>
  inputId = document.getElementById('word');
  inputId.addEventListener('keyup', function onEvent(e) {
      if (e.keyCode === 13) {
        doFill();
      }})

</script>

</body>
</html>